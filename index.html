<!doctype html>
<html lang="en"> 
<script src='https://d3js.org/d3.v5.min.js'></script>

<head>
  <title>Michael Potts</title>
</head>

<style> 
    circle {fill: rgb(28, 152, 224); stroke: black;} 
    rect {fill: rgb(46, 202, 202); stroke: black;} 
    .button {color: white; text-align: center; display: inline-block; font-size: 16px; cursor: pointer;
            padding: 15px 32px; margin: 4px 2px;}
    .button1 {background-color: rgb(10, 60, 224)}
</style>
<body onload='init()'>
    
    <!-- Header -->
    <div class="full-width header">
        <div class="full-width header-inner">
            <div class="container">
                <div class="title col-sm-8">
                    <h1>Visual Narrative Project</h1>
                    <h2>Title</h2>
                    <p class="authors">
                    Michael Potts - July 31st, 2022
                    </p>
                </div>
                <div class="graphic col-sm-4 pull-right">
                </div>
            </div>
        </div>
    </div>
  
    <!-- Intro -->
    <div class="full-width section-intro">
        <div class="container">
            <p>This is the intro for my narrative visualization project</p>
        </div>
    </div>

    <svg width=960 height=540></svg>

    <button class="button button1" onclick="scene_two()">Next scene</button>

    <script>
        async function init() {
            var xs = d3.scaleBand().domain([0,1,2,3,4,5]).range([0, 200]),
                ys = d3.scaleLinear().domain([0,42]).range([200,0]);

            var margin = 50,
                height = 200,
                width = 200
                data = [4,8,15,16,23,42];

            d3.select("svg").attr("width", width + 2 * margin)
                .attr("height", height + 2 * margin)
                .append("g").attr("transform", "translate("+margin+","+margin+")")
                .selectAll("rect").data(data).enter()
                .append('rect')
                .attr("x", function(d, i) {return xs(i);})
                .attr("y", function(d, i) {return ys(d);})
                .attr("width", xs.bandwidth())
                .attr("height", function(d) {return height - ys(d);});
            
            d3.select("svg").append("g")
                .attr("class", "y axis")
                .attr("transform", "translate("+margin+","+margin+")")
                .call(d3.axisLeft(ys));

            d3.select("svg").append("g")
                .attr("transform", "translate("+margin+","+(height + margin)+")")
                .call(d3.axisBottom(xs));
        }

        function update_data() {
            data = [];
            for(let i=0; i < 6; i++) {
                data.push(Math.random() * 800);
            }
        }

        function update() {
            var xs = d3.scaleBand().domain([0,1,2,3,4,5]).range([0, 200]),
                ys = d3.scaleLinear().domain([0,120]).range([200,0]);

            var margin = 50,
                height = 200;

            d3.select("svg").selectAll("rect").data(data).join("rect")
                .transition()
                .attr("y", function(d, i) {return ys(d);})
                .attr("height", function(d) {return height - ys(d);});

            d3.select("svg").append("g")
                .attr("transform", "translate("+margin+","+margin+")")
                .transition()
                .call(d3.axisLeft(ys));
        }

        async function scene_two() {
            update_data();
            update();
        }
    
    </script>
        
        
</body>
</html>
